{% extends "./layout/mainLayout.njk" %}

{% block mainbody %}
{#    <form  id="form1" method="post">#}
{#        {{forms.label("User", "user")}}#}
{#        {{forms.field("user")}}#}
{#        {{forms.label("Password", "password")}}#}
{#        {{forms.field("password")}}#}
{#        {{forms.submit("Login")}}#}
{#    </form>#}
    <h1>Login if you have an account</h1>
    <form action="/user/login" method="post" id="form1" >

        <label for="user">Username: </label>
        <input type="text" name="user" id="user_id"><br>
        <br>
        <label for="password">Password:  </label>
        <input type="text" name="password" id="password">
        <br><br>
        <input type="submit" value = "Submit">

    </form>



{% endblock mainbody %}

<script>

        let form1 = document.getElementById("form1");

        // This form is to submit login request
        form1.onsubmit = (e)=>{
            e.preventDefault()
            const formData = new FormData(e.target)
            const formProps = Object.fromEntries(formData)
            const jsonString = JSON.stringify(formProps)


            // Fetch Request
            fetch("/user/login", {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: jsonString
            })
            .then(res => res.json())
        }

        
        
</script>